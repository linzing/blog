{"posts":[{"title":"Zerotier 局域网穿透神器","content":"ARM架构搭建 搭建命令，注意$HOME位置 docker run --name zerotier-one --device=/dev/net/tun --net=host \\ --cap-add=NET_ADMIN --cap-add=SYS_ADMIN \\ -v $HOME/docker/zerotier-one:/var/lib/zerotier-one ugeek/zerotier:arm 进入容器 docker exec -it zerotier-one bash 加入网络 zerotier-cli join Network_ID 离开网络 zerotier-cli leave Network_ID、 X64架构搭建 搭建命令，注意$HOME位置 docker run \\ -d \\ --restart unless-stopped \\ --name zerotier-one \\ --device /dev/net/tun \\ --net host \\ --cap-add NET_ADMIN \\ --cap-add SYS_ADMIN \\ -v /disk/docker/zerotier-one:/var/lib/zerotier-one \\ henrist/zerotier-one 加入网络 docker exec zerotier-one zerotier-cli join 88503383901559a0 显示服务状态： docker exec zerotier-one zerotier-cli status ","link":"https://github.com/linzing/post/zerotier-ju-yu-wang-chuan-tou-shen-qi/"},{"title":"Xware 迅雷 ","content":"docker run -d --privileged=true \\ --name=xware \\ --net=host \\ -v /disk/Samba/Watch:/app/TDDOWNLOAD \\ yinheli/docker-thunder-xware 查看docker绑定码 docker logs xware 访问http://yuancheng.xunlei.com/ 这个网站 登录后用docker里的绑定码bftamp 在这个网站上绑定下载器。 （视乎已失效） ","link":"https://github.com/linzing/post/xware-xun-lei/"},{"title":"v2Ray 客户端搭建","content":"拉取镜像 docker pull teddysun/v2ray 创建容器 docker run -d -p 1080:1080 --name v2ray --restart=always -v /disk/v2ray:/etc/v2ray teddysun/v2ray 在/disk/docker/v2ray文件路径里面必须添加一个config.json的配置文件，不然会打不开v2ray ","link":"https://github.com/linzing/post/v2ray-ke-hu-duan-da-jian/"},{"title":"Transmission BT下载服务器","content":"ARM和X86通用 docker create \\ --name=transmission \\ -e PUID=1000 \\ -e PGID=1000 \\ -e TZ=Asia/Shanghai \\ -e TRANSMISSION_WEB_HOME=/transmission-web-control\\ -e USER=linzing \\ -e PASS=545200 \\ -p 9091:9091 \\ -p 51413:51413 \\ -p 51413:51413/udp \\ -v /disk/docker/transmission:/config \\ -v /disk/docker/transmission/download:/downloads \\ -v /disk/docker/transmission/download/watch:/watch \\ --restart unless-stopped \\ linuxserver/transmission 项目地址 https://hub.docker.com/r/linuxserver/transmission/ 系统默认配置 docker create \\ --name=transmission \\ -e PUID=1000 \\ -e PGID=1000 \\ -e TZ=Europe/London \\ -e TRANSMISSION_WEB_HOME=/transmission-web-control\\ -e USER=linzing \\ -e PASS=545200 \\ -p 9091:9091 \\ -p 51413:51413 \\ -p 51413:51413/udp \\ -v /disk/docker/transmission:/config \\ -v /disk/Samba/Transmission:/downloads \\ -v /disk/Samba/Transmission/watch:/watch \\ --restart unless-stopped \\ linuxserver/transmission ","link":"https://github.com/linzing/post/transmission-bt-xia-zai-fu-wu-qi/"},{"title":" Traccar 开源GPS定位系统","content":"创建工作目录： mkdir -p /disk/docker/traccar/logs 获取默认的traccar.xml： docker run \\ --rm \\ --entrypoint cat \\ traccar/traccar:latest \\ /opt/traccar/conf/traccar.xml &gt; /disk/docker/traccar/traccar.xml 编辑traccar.xml： https//www.traccar.org/configuration-file/ 创建容器： docker run \\ -d --restart always \\ --name traccar \\ --hostname traccar \\ -p 8082:8082 \\ -p 5000-5150:5000-5150 \\ -p 5000-5150:5000-5150/udp \\ -v /disk/docker/traccar/logs:/opt/traccar/logs:rw \\ -v /disk/docker/traccar/traccar.xml:/opt/traccar/conf/traccar.xml:ro \\ traccar/traccar:latest 带时区设置 docker run \\ -d --restart always \\ --name traccar \\ --hostname traccar \\ -e TZ=Asia/Shanghai -p 8082:8082 \\ -p 5000-5150:5000-5150 \\ -p 5000-5150:5000-5150/udp \\ -v /disk/docker/traccar/logs:/opt/traccar/logs:rw \\ -v /disk/docker/traccar/traccar.xml:/opt/traccar/conf/traccar.xml:ro \\ traccar/traccar:latest MySQL的配置参数（用适当的值替换[HOST]，[DATABASE]，[USER]，[PASSWORD]；对于本地数据库，请使用“ localhost”作为HOST）： &lt;entry key='database.driver'&gt;com.mysql.cj.jdbc.Driver&lt;/entry&gt; &lt;entry key='database.url'&gt;jdbc:mysql://10.10.10.243:3306/traccar?serverTimezone=UTC&amp;amp;useSSL=false&amp;amp;allowMultiQueries=true&amp;amp;autoReconnect=true&amp;amp;useUnicode=yes&amp;amp;characterEncoding=UTF-8&amp;amp;sessionVariables=sql_mode=''&lt;/entry&gt; &lt;entry key='database.user'&gt;root&lt;/entry&gt; &lt;entry key='database.password'&gt;851555386&lt;/entry&gt; 时区问题方法2 在traccar.xml加上： &lt;entry key='time.override'&gt;deviceTime&lt;/entry&gt; &lt;entry key='time.protocols'&gt;osmand,gt06&lt;/entry&gt; ","link":"https://github.com/linzing/post/traccar-kai-yuan-gps-ding-wei-xi-tong/"},{"title":"SAMB 局域网共享服务器","content":"ARM和X86通用 一个盘 docker run -it --name samba -p 139:139 -p 445:445 -v /disk/docker/samba:/mount -d dperson/samba -u &quot;linzing;851555386&quot; -s &quot;samba;/mount/;yes;no;no;all;none&quot; 两个盘 docker run -it --name samba -p 139:139 -p 445:445 -v /disk/docker/samba:/mount -v /disk/docker/samba1/samba:/mount1 -d dperson/samba -u &quot;linzing;851555386&quot; -s &quot;samba;/mount/;yes;no;no;all;none&quot; -s &quot;samba1;/mount1/;yes;no;no;all;none&quot; 系统默认配置版本 docker run -it --name samba -p 139:139 -p 445:445 -v /disk/Samba:/mount -d dperson/samba -u &quot;linzing;851555386&quot; -s &quot;Samba;/mount/;yes;no;no;all;none&quot; //旧版 添加两个盘 docker stop samba docker rm samba docker run -it --name samba -p 139:139 -p 445:445 -v /3tdisk:/mount -v /disk/docker/samba:/mount1 -d dperson/samba -u &quot;linzing;851555386&quot; -s &quot;3tdisk;/mount/;yes;no;no;all;none&quot; -s &quot;samba;/mount1/;yes;no;no;all;none&quot; https://www.jianshu.com/p/bf65233c068d docker run -it --name samba -p 139:139 -p 445:445 -v /udisk:/mount -d dperson/samba -u &quot;linzing;851555386&quot; -s &quot;udisk;/mount/;yes;no;no;all;none&quot; ","link":"https://github.com/linzing/post/samb-ju-yu-wang-gong-xiang-fu-wu-qi/"},{"title":" Phpmyadmin","content":"新建文件 vim /disk/docker/phpmyadmin/config.user.inc.php 部署容器 docker run -itd --name phpmyadmin -p 8083:80 -e PMA_HOST=10.10.10.243 -e PMA_PORT=3306 -e PMA_USER=root -e PMA_PASSWORD=851555386 -v /disk/docker/phpmyadmin/config.user.inc.php:/etc/phpmyadmin/config.user.inc.php phpmyadmin/phpmyadmin docker run --name myadmin -d --link mysql_db_server:db -p 8080:80 -v /some/local/directory/config.user.inc.php:/etc/phpmyadmin/config.user.inc.php phpmyadmin/phpmyadmin ","link":"https://github.com/linzing/post/phpmyadmin/"},{"title":"Nextcloud 开源云盘系统","content":"项目地址https://hub.docker.com/_/nextcloud/ 搭建 docker pull nextcloud docker run --name nextcloud -p 8080:80 -v /disk/docker/nextcloud:/var/www/html -d nextcloud 更新 docker pull nextcloud docker stop nextcloud docker rm nextcloud docker run --name nextcloud -p 8080:80 -v /disk/docker/nextcloud:/var/www/html -d nextcloud 添加域名，在配置文件里面修改 /config/config.php 来自 https://www.cnblogs.com/h5av/p/10687751.html ","link":"https://github.com/linzing/post/nextcloud-kai-yuan-yun-pan-xi-tong/"},{"title":"MYSQL","content":"拉取 MySQL 镜像 这里我们拉取官方的最新版本的镜像： docker pull mysql:latest 运行容器 安装完成后，我们可以使用以下命令来运行 mysql 容器： docker run -itd --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=851555386 -v /disk/docker/myslq/datadir:/var/lib/mysql mysql 参数说明： -p 3306:3306 ：映射容器服务的 3306 端口到宿主机的 3306 端口，外部主机可以直接通过 宿主机ip:3306 访问到 MySQL 的服务。 MYSQL_ROOT_PASSWORD=123456：设置 MySQL 服务 root 用户的密码。 phpmyadmin搭建 docker run -itd --name phpmyadmin -p 8083:80 -e PMA_HOST=10.10.10.243 -e PMA_PORT=3306 -e PMA_USER=root -e PMA_PASSWORD=851555386 phpmyadmin/phpmyadmin 默认搭建的时候ROOT是没有外部访问权限，需要进入MYSQL里面设置权限 docker exec -it mysql /bin/bash mysql -uroot -p851555386 ALTER user 'root'@'%' IDENTIFIED WITH mysql_native_password BY '851555386'; 显示：Query OK, 0 rows affected (0.09 sec) 即可 ","link":"https://github.com/linzing/post/mysql/"},{"title":"Docker for Linux 镜像","content":"debian ： docker run -tid --name awtrix -p 7000:7000 -p 7001:7001 --privileged=true debian /bin/bash centos： docker run -tid --name awtrix -p 7000:7000 -p 7001:7001 --privileged=true centos /usr/sbin/init Linux Docker systemctl 命令无法使用的解决方案 CentOS7 docker run -tid --name test_1 --privileged=true centos:latest /usr/sbin/init docker exec -it test_1 /bin/bash Ubuntu16.04 docker run -tid --name test_2 --privileged=true ubuntu:16.04 /sbin/init docker exec -it test_2 /bin/bash 来自 https://blog.csdn.net/THMAIL/article/details/103687508/ arm 可开机启动的镜像 docker run -d -it --name linux -v /sys/fs/cgroup:/sys/fs/cgroup:ro --cap-add SYS_ADMIN -p 7000:7000 -p 7001:7001 alehaa/debian-systemd:stretch ","link":"https://github.com/linzing/post/docker-for-linux-jing-xiang/"},{"title":"Jellyfin 一个支持硬解码的媒体中心","content":"Docker docker run -d -p 8096:8096 -v /disk/docker/jellyfin:/config -v /disk/Samba/媒体影音:/media --device=/dev/dri/renderD128 --restart unless-stopped jellyfin/jellyfi ","link":"https://github.com/linzing/post/jellyfin-yi-ge-zhi-chi-ying-jie-ma-de-mei-ti-zhong-xin/"},{"title":"HomeAssistant 智能家居管理系统","content":" 查找镜像 docker search homeassistant 选择STARS最多的镜像 拉取镜像 docker pull homeassistant/home-assistant 查看镜像 docker images homeassistant/home-assistant 启动镜像 docker run --init -d --name=&quot;home-assistant&quot; -e &quot;TZ=Asia/Shanghai&quot; -v /PATH_TO_YOUR_CONFIG:/config --net=host homeassistant/home-assistant:latest 您需要替换/PATH_TO_YOUR_CONFIG为配置路径，例如，如果您选择配置路径为/home/hanhui/homeassistant，则命令将为： docker run --init -d --name=&quot;home-assistant&quot; -e &quot;TZ=Asia/Shanghai&quot; -v /home/hanhui/homeassistant:/config --net=host homeassistant/home-assistant:latest 来自 https://blog.csdn.net/hanhui22/article/details/106729122 ","link":"https://github.com/linzing/post/homeassistant-zhi-neng-jia-ju-guan-li-xi-tong/"},{"title":"共享打印机器CPUS","content":"CUPS X86架构 docker run -d -p 631:631 --privileged \\ -v /dev/bus/usb/:/dev/bus/usb \\ -v /var/run/dbus:/var/run/dbus \\ --name cups olbat/cupsd:latest ARM架构 docker run -p 631:631 --privileged \\ -d --restart always \\ -v /dev/bus/usb:/dev/bus/usb \\ -v /var/run/dbus:/var/run/dbus \\ -v /docker/cups:/etc/cups \\ --name cups ydkn/cups:latest ","link":"https://github.com/linzing/post/gong-xiang-da-yin-ji-qi-cpus/"},{"title":"Awtrix2 开源智能钟","content":"Awtrix2 X86架构 docker run -d --name awtrix2 \\ --restart always \\ -p 7000:7000 \\ -p 7001:7001 \\ -v /disk/docker/awtrix:/data \\ -e TZ=Asia/Shanghai \\ whyet/awtrix2:latest 加快打开速度访问 进入容器：docker exec -it 9016ef2c0117 /bin/bash 改SH脚本：vi /containerdata/docker-entrypoint.sh 把 wget https://blueforcer.de/awtrix/stable/awtrix.jar -O /data/awtrix.jar 改成 wget https://xckeai.lincloud.tk/awtrix/stable/awtrix.jar -O /data/awtrix.jar BILIBILI关注统计 300702024 COVID19 US 比特币价格 ：硬币btc 货币CNY IconID240 股票API密钥：YHG8YGS13L5HRL03 股票代码QD,AAPL,GOOGL 彩云天气经纬度： 经度 113.203605 纬度 23.106883 彩云密钥：=IgRRC53WxwLvm2r 编辑awtrix.service [Unit] Description=AWTRIX HOST After=network.target [Service] WorkingDirectory=/usr/local/awtrix Type=simple ExecStart=java -jar /root/awtrix2/awtrix.jar Restart=always RestartSec=3 [Install] WantedBy=multi-user.target 把awtrix.service复制到开机目录里面 cp /root/awtrix.service /lib/systemd/system/ 赋权 chmod 777 /lib/systemd/system/awtrix.service 刷新系统 systemctl daemon-reload 设置开机启动 systemctl enable awtrix.service 开始服务 systemctl start awtrix.service 重启服务 systemctl restart awtrix.service 查看服务 systemctl status awtrix.service 取消开机启动 systemctl disable awtrix.service ","link":"https://github.com/linzing/post/awtrix2-kai-yuan-zhi-neng-zhong/"},{"title":"Docker 服务搭建调试","content":"Doceker 安装docker的教程非常多， https://www.runoob.com/docker/centos-docker-install.html 让docker服务自启动 systemctl enable docker.service 已经创建的容器未指定自启动的可以通过顺达特命令设置 docker update --restart=always xxx docker update –restart=no xxx 查看运行的容器 docker ps 查看全部容器 docker ps -a 查看镜像 docker images 查看资源监控 docker stats 开始 docker start 停止 docker stop 您可以通过修改daemon配置文件/etc/docker/daemon.json来使用加速器 阿里 mkdir -p /etc/docker tee /etc/docker/daemon.json &lt;&lt;-'EOF' { &quot;registry-mirrors&quot;: [&quot;https://q052ohga.mirror.aliyuncs.com&quot;] } EOF systemctl daemon-reload systemctl restart docker 来自 https://cr.console.aliyun.com/cn-qingdao/instances/mirrors 或者daocloud { &quot;registry-mirrors&quot;: [&quot;http://f1361db2.m.daocloud.io&quot;] } { &quot;registry-mirrors&quot;: [ &quot;http://hub-mirror.c.163.com&quot; &quot;http://docker.mirrors.ustc.edu.cn&quot;, &quot;http://registry.docker-cn.com&quot;, ] } 全家桶 { &quot;registry-mirrors&quot;: [&quot;http://hub-mirror.c.163.com&quot;,&quot;http://f1361db2.m.daocloud.io&quot;,&quot;https://q052ohga.mirror.aliyuncs.com&quot;,&quot;https://3laho3y3.mirror.aliyuncs.com&quot;,&quot;https://docker.mirrors.ustc.edu.cn&quot;] } 防火墙问题 centos的firewall防火墙和docker有冲突。关闭防火墙的时候docker容器有时候运行不起来 最后的解决方式是把docker的网络接口设置为白名单 firewall-cmd --permanent --zone=trusted --add-interface=docker0 来自 https://unix.stackexchange.com/questions/199966/how-to-configure-centos-7-firewalld-to-allow-docker-containers-free-access-to-th 保险起见，重启防火墙和docker服务 firewall-cmd --reload systemctl restart docker 有关于防火墙的文章看一下链接 https://www.cnblogs.com/leoxuan/p/8275343.html 配置文件路径为：/var/lib/docker/containers/容器ID 容器命名 docker rename 原容器名称 新容器名称 Docker备份与迁移 1 容器保存为镜像 我们可以通过以下命令将容器保存为镜像 docker commit nginx mynginx nginx是容器名称 mynginx是新的镜像名称 此镜像的内容就是你当前容器的内容，接下来你可以用此镜像再次运行新的容器 2 镜像备份 docker save -o mynginx.tar mynginx -o 输出到的文件 执行后，运行ls命令即可看到打成的tar包 3镜像恢复与迁移 首先我们先删除掉mynginx镜像 然后执行此命令进行恢复 docker load -i mynginx.tar -i 输入的文件 执行后再次查看镜像，可以看到镜像已经恢复 安装linux容器 docker run -it -p 2221:22 -p 8880:80 镜像名 /bin/bash 来自 https://www.cnblogs.com/luyanjie/p/9656863.html docker run -itd --privileged --name myCentos -p 2222:22 589dc4d40385 /usr/sbin/init Centos8 安装Docker的方法不一样，按照以下文章按照 https://phoenixnap.com/kb/how-to-install-docker-on-centos-8 使用DNF添加并启用官方Docker CE存储库。在终端窗口中键入以下命令： sudo dnf config-manager --add-repo=https://download.docker.com/linux/centos/docker-ce.repo 系统通知您已经成功检索了存储库。 终端确认Docker已添加到CentOS 8。 sudo dnf repolist -v 屏幕信息提供所有相关的详细信息。 验证是否添加了正确的存储库 要列出所有可用的docker-ce软件包，请输入： dnf list docker-ce --showduplicates | sort -r 不幸的是，CentOS 8不支持container.id软件包的特定版本。这意味着仅某些版本的docker-ce可用于安装。 可在系统上安装的docker-ce版本列表 有两种方法可以解决此问题并在CentOS 8上安装Docker。 在CentOS 8上安装Docker CE 选项1：跳过具有损坏损坏的程序包 一个有效的解决方案是使您的CentOS 8系统使用以下--nobest命令安装最符合条件的版本： sudo dnf install docker-ce --nobest 安装将跳过最新的候选版本，并使用所需的containerd.io软件包安装最合适的版本。 使用nobest命令安装docker ce 输入y确认后，系统将继续安装Docker CE 18.06.3.ce-3.el7。 安装跳过了最新版本 如果仔细观察，您会看到安装跳过了不符合条件的最新版本的docker-ce。 选项2：手动安装containerd.io 在CenOS 8上安装Docker的另一个选择是预先手动安装containerd.io软件包。该解决方法可让您安装最新的docker-ce版本。 使用以下命令： sudo dnf install https://download.docker.com/linux/centos/7/x86_64/stable/Packages/containerd.io-1.2.10-3.2.el7.x86_64.rpm 使用y确认安装。您已经成功安装了最新版本的containerd.io。 成功安装了最新版本的containerd.io 现在，我们可以使用一个简单的命令来安装最新版本的docker-ce： sudo dnf install docker-ce -y 以下输出确认docker-ce-3：19.03.5-3.el7.x86_64已成功安装。 安装了最新版本的Docker CE 启动并测试Docker 启用Docker 通过以下方式启用并启动Docker服务： sudo systemctl enable --now docker 输出确认我们已经创建了符号链接。 在CentOS 8上启用Docker 接下来，使用以下简短命令确认Docker是否处于活动状态并正在运行： systemctl status docker 我们看到了时间戳，并确认Docker是活动的。 Docker在CentOS上处于活动状态并正在运行确认 ","link":"https://github.com/linzing/post/docker-fu-wu-da-jian-diao-shi/"}]}